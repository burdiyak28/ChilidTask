<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ChilidTable</title>
</head>
<body>
<table id="tableOfEmployee" border="1">
    <thead>
    <tr id="tableHeader">
        <th data-sort="id">ID</th>
        <th data-sort="firstName">First Name</th>
        <th data-sort="lastName">Last Name</th>
        <th data-sort="dateOfBirth">Date of Birth</th>
        <th data-sort="company">Company</th>
        <th data-sort="note">Note</th>
    </tr>
    </thead>
    <tbody id="dateOfEmployee">

    </tbody>
</table>
<div class="pagination">

</div>

<script>
    var numberPage = 1;
    var keyOfSort = "id";

    function getData() {
        var data = '[{"id":1,"firstName":"Jan","lastName":"Kowalski","dateOfBirth":"1.7.1990 11:35","company":"XSolve","note":90},{"id":4,"firstName":"Justyna","lastName":"Kowalska","dateOfBirth":"4.02.1976 14:37","company":"XSolve","note":91},{"id":2,"firstName":"Krzysztof","lastName":"Krawczyk","dateOfBirth":"28.10.1950 2:15","company":"Chilid","note":27},{"id":3,"firstName":"Boguslaw","lastName":"Linda","dateOfBirth":"03.01.1963 23:10","company":"XSolve","note":50},{"id":5,"firstName":"Krzysztof","lastName":"Kononowicz","dateOfBirth":"10.10.1910 18:00","company":"Chilid","note":77},{"id":6,"firstName":"Maryla","lastName":"Rodowicz","dateOfBirth":"29.02.1936 11:35","company":"XSolve","note":8},{"id":7,"firstName":"Edyta","lastName":"Gorniak","dateOfBirth":"14.11.1972 06:35","company":"XSolve","note":25},{"id":8,"firstName":"Dawid","lastName":"Podsiadlo","dateOfBirth":"23.05.1993 16:15","company":"Chilid","note":19},{"id":9,"firstName":"Elvis","lastName":"Presley","dateOfBirth":"09.01.1935 01:35","company":"XSolve","note":8},{"id":1,"firstName":"Jan","lastName":"Kowalski","dateOfBirth":"1.7.1990 11:35","company":"XSolve","note":90},{"id":4,"firstName":"Justyna","lastName":"Kowalska","dateOfBirth":"4.02.1976 14:37","company":"XSolve","note":91},{"id":2,"firstName":"Krzysztof","lastName":"Krawczyk","dateOfBirth":"28.10.1950 2:15","company":"Chilid","note":27},{"id":3,"firstName":"Boguslaw","lastName":"Linda","dateOfBirth":"03.01.1963 23:10","company":"XSolve","note":50},{"id":5,"firstName":"Krzysztof","lastName":"Kononowicz","dateOfBirth":"10.10.1910 18:00","company":"Chilid","note":77},{"id":6,"firstName":"Maryla","lastName":"Rodowicz","dateOfBirth":"29.02.1936 11:35","company":"XSolve","note":8},{"id":7,"firstName":"Edyta","lastName":"Gorniak","dateOfBirth":"14.11.1972 06:35","company":"XSolve","note":25},{"id":8,"firstName":"Dawid","lastName":"Podsiadlo","dateOfBirth":"23.05.1993 16:15","company":"Chilid","note":19},{"id":9,"firstName":"Elvis","lastName":"Presley","dateOfBirth":"09.01.1935 01:35","company":"XSolve","note":8},{"id":1,"firstName":"Jan","lastName":"Kowalski","dateOfBirth":"1.7.1990 11:35","company":"XSolve","note":90},{"id":4,"firstName":"Justyna","lastName":"Kowalska","dateOfBirth":"4.02.1976 14:37","company":"XSolve","note":91},{"id":2,"firstName":"Krzysztof","lastName":"Krawczyk","dateOfBirth":"28.10.1950 2:15","company":"Chilid","note":27},{"id":3,"firstName":"Boguslaw","lastName":"Linda","dateOfBirth":"03.01.1963 23:10","company":"XSolve","note":50},{"id":5,"firstName":"Krzysztof","lastName":"Kononowicz","dateOfBirth":"10.10.1910 18:00","company":"Chilid","note":77},{"id":6,"firstName":"Maryla","lastName":"Rodowicz","dateOfBirth":"29.02.1936 11:35","company":"XSolve","note":8},{"id":7,"firstName":"Edyta","lastName":"Gorniak","dateOfBirth":"14.11.1972 06:35","company":"XSolve","note":25},{"id":8,"firstName":"Dawid","lastName":"Podsiadlo","dateOfBirth":"23.05.1993 16:15","company":"Chilid","note":19},{"id":9,"firstName":"Elvis","lastName":"Presley","dateOfBirth":"09.01.1935 01:35","company":"XSolve","note":8}]';
        return JSON.parse(data);
    }

    function showData() {


        var arrayOfData = getData();
        var sortResult = sortOfKey(arrayOfData, keyOfSort);

        var pagin = pagination(sortResult, numberPage);



        document.getElementById("dateOfEmployee").innerHTML = "";
        document.getElementsByClassName("pagination")[0].innerHTML = "";

        pagin.forEach(function (value) {
            var element = document.createElement("tr");

            //document.getElementById("dateOfEmployee").insertAdjacentHTML('afterbegin', "<tr>");

            for (var key in value) {

                var htmlToInsert = document.createElement("td");
                htmlToInsert.innerHTML = value[key];

                //document.getElementById("dateOfEmployee").insertAdjacentHTML('beforeend', htmlToInsert);

                element.appendChild(htmlToInsert);

            }

            document.getElementById("dateOfEmployee").appendChild(element);
        });


        var countyPages = countPages(arrayOfData.length);
        createLinks(countyPages);
    }

    showData();

    function pagination (data, number){
        var countElementsOnPage = 5;
        return data.slice(number*countElementsOnPage-countElementsOnPage, number*countElementsOnPage);
    }

    function countPages(countElements) {
        var countElementsOnPage = 5;
        return Math.ceil(countElements/countElementsOnPage);
    }

    function createLinks(countPages) {
        for (var i = 1; i <= countPages; i++){
            var tagLink = document.createElement("a");
            tagLink.setAttribute("href", "#");
            tagLink.addEventListener("click", showContentAfterCLick);
            var nameOfLink = document.createTextNode(i);
            tagLink.appendChild(nameOfLink);
            document.getElementsByClassName("pagination")[0].appendChild(tagLink);

        }
    }

    function showContentAfterCLick() {
        numberPage = this.innerHTML;
        showData();

    }


    function sortOfKey (arrayToSort, key) {
        arrayToSort.sort(function (a, b) {
            if (a[key] > b[key]) {
                return 1;
            }
            if (a[key] < b[key]) {
                return -1;
            }

            return 0;
        });
        return arrayToSort;
    }

    function nameAttribute() {
        var childrenOfTable = document.getElementById("tableHeader").children;
        for(var i = 0; i < childrenOfTable.length; i++){
            childrenOfTable[i].addEventListener("click", function () {
                keyOfSort = this.getAttribute('data-sort');
                showData();
            });
        }


    }
    nameAttribute();




</script>
</body>
</html>